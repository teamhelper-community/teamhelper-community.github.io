import{_ as r,r as a,c as s,o as l,e,a as t,d as n,b as o}from"./app-Ne0PdyYx.js";const u={},c={href:"https://datatracker.ietf.org/doc/html/rfc7636",target:"_blank",rel:"noopener noreferrer"};function h(v,d){const i=a("ExternalLinkIcon");return l(),s("div",null,[d[20]||(d[20]=e(`<h1 id="认证及授权" tabindex="-1"><a class="header-anchor" href="#认证及授权" aria-hidden="true">#</a> 认证及授权</h1><h3 id="web端获取code" tabindex="-1"><a class="header-anchor" href="#web端获取code" aria-hidden="true">#</a> Web端获取code</h3><ul><li><p>请求地址：</p><ul><li><div class="language-Bash line-numbers-mode" data-ext="Bash"><pre class="language-Bash"><code>https://api-v3.teamhelper.cn/open-apis/authen/v1/authorize
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul></li><li><p>请求方式：GET</p></li><li><p>请求头</p></li></ul><table><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>Content-Type</td><td>string</td><td>是</td><td>请求体类型。固定值：application/json; charset=utf-8</td></tr><tr><td>Authorization</td><td>string</td><td>是</td><td>access_token以登录用户身份调用 API，可读写的数据范围由用户可读写的数据范围决定。值格式：&quot;Bearer access_token&quot;示例值：&quot;Bearer u-cjz1eKCEx289x1TXEiQJqAh5171B4gDHPq00l0GE1234&quot;</td></tr></tbody></table><ul><li>请求参数：</li></ul><table><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>client_id</td><td>是</td><td>应用唯一标识，在应用中心提交应用审核通过后获得App ID</td></tr><tr><td>redirect_uri</td><td>是</td><td>应用重定向地址，在用户授权成功后会跳转至该地址，同时会携带 code 以及 state 参数（如有传递 state 参数）。 请注意：Web端必填 该地址需经过 URL 编码； 调用本接口前，你需要在开发者后台应用的安全设置页面，将用于接受 OAuth 回调的 HTTP GET 请求接口地址配置为应用的重定向 URL。重定向 URL 支持配置多个，只有在重定向 URL 列表中的 URL 才会通过开放平台的安全校验。</td></tr><tr><td>scope</td><td>是</td><td>应用授权作用域，获取用户个人信息则填写 snsapi_base（只能填 snsapi_base）</td></tr><tr><td>state</td><td>否</td><td>用于保持请求和回调的状态，授权请求后原样带回给第三方。该参数可用于防止 csrf 攻击（跨站请求伪造攻击），建议第三方带上该参数，可设置为简单的随机数加 session 进行校验。在state传递的过程中会将该参数作为url的一部分进行处理，因此建议对该参数进行url encode操作，防止其中含有影响url解析的特殊字符（如&#39;#&#39;、&#39;&amp;&#39;等）导致该参数无法正确回传。</td></tr></tbody></table><ul><li>响应参数：</li></ul><table><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>code</td><td>int</td><td>错误码，非 200 表示失败</td></tr><tr><td>msg</td><td>string</td><td>错误描述</td></tr><tr><td>data</td><td>-</td><td>-</td></tr><tr><td>client_id</td><td>string</td><td>应用唯一标识，在应用中心提交应用审核通过后获得App ID</td></tr><tr><td>redirect_uri</td><td>string</td><td>应用重定向地址，在用户授权成功后会跳转至该地址，同时会携带 code 以及 state 参数（如有传递 state 参数）。 请注意： 该地址需经过 URL 编码； 调用本接口前，你需要在开发者后台应用的安全设置页面，将用于接受 OAuth 回调的 HTTP GET 请求接口地址配置为应用的重定向 URL。重定向 URL 支持配置多个，只有在重定向 URL 列表中的 URL 才会通过开放平台的安全校验。</td></tr><tr><td>code</td><td>string</td><td>授权码</td></tr><tr><td>state</td><td>string</td><td>用于保持请求和回调的状态，授权请求后原样带回给第三方。该参数可用于防止 csrf 攻击（跨站请求伪造攻击），建议第三方带上该参数，可设置为简单的随机数加 session 进行校验。在state传递的过程中会将该参数作为url的一部分进行处理，因此建议对该参数进行url encode操作，防止其中含有影响url解析的特殊字符（如&#39;#&#39;、&#39;&amp;&#39;等）导致该参数无法正确回传。</td></tr></tbody></table><ul><li>示例说明：</li></ul><div class="language-Plain line-numbers-mode" data-ext="Plain"><pre class="language-Plain"><code>{
    &quot;code&quot;:200,
    &quot;msg&quot;:&quot;成功&quot;,
    &quot;data&quot;:{
        &quot;grant_type&quot;: &quot;authorization_code&quot;,
        &quot;client_id&quot;: &quot;cli_a5ca35a685b0x26e&quot;,
        &quot;code&quot;: &quot;a61hb967bd094dge949h79bbexd16dfe&quot;,
        &quot;redirect_uri&quot;: &quot;https://example.com/api/oauth/callback&quot;,
        &quot;code_verifier&quot;: &quot;TxYmzM4PHLBlqm5NtnCmwxMH8mFlRWl_ipie3O0aVzo&quot;
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="眼镜端获取code" tabindex="-1"><a class="header-anchor" href="#眼镜端获取code" aria-hidden="true">#</a> 眼镜端获取code</h3><p>​ 开发者需要引入基座App提供的 SDK，并通过 SDK 提供的 API 来唤起基座App客户端并进行授权登录，用户点击确认授权之后，基座App客户端会唤起开发者客户端，并携带授权码（code）。</p><ul><li><p>请求地址：</p><ul><li><div class="language-Bash line-numbers-mode" data-ext="Bash"><pre class="language-Bash"><code>https://api-v3.teamhelper.cn/open-apis/authen/v1/authorize
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul></li><li><p>请求方式：POST</p></li><li><p>请求头</p></li></ul><table><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>Content-Type</td><td>string</td><td>是</td><td>请求体类型。固定值：application/json; charset=utf-8</td></tr><tr><td>Authorization</td><td>string</td><td>是</td><td>access_token以登录用户身份调用 API，可读写的数据范围由用户可读写的数据范围决定。值格式：&quot;Bearer access_token&quot;示例值：&quot;Bearer u-cjz1eKCEx289x1TXEiQJqAh5171B4gDHPq00l0GE1234&quot;</td></tr></tbody></table><ul><li>请求参数：</li></ul><table><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>client_id</td><td>是</td><td>应用唯一标识，在应用中心提交应用审核通过后获得App ID</td></tr><tr><td>scope</td><td>是</td><td>应用授权作用域，获取用户个人信息则填写 snsapi_base（只能填 snsapi_base）</td></tr><tr><td>state</td><td>否</td><td>用于保持请求和回调的状态，授权请求后原样带回给第三方。该参数可用于防止 csrf 攻击（跨站请求伪造攻击），建议第三方带上该参数，可设置为简单的随机数加 session 进行校验。在state传递的过程中会将该参数作为url的一部分进行处理，因此建议对该参数进行url encode操作，防止其中含有影响url解析的特殊字符（如&#39;#&#39;、&#39;&amp;&#39;等）导致该参数无法正确回传。</td></tr></tbody></table><ul><li>响应参数：</li></ul><table><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>code</td><td>int</td><td>错误码，非 200 表示失败</td></tr><tr><td>msg</td><td>string</td><td>错误描述</td></tr><tr><td>data</td><td>-</td><td>-</td></tr><tr><td>client_id</td><td>string</td><td>应用唯一标识，在应用中心提交应用审核通过后获得App ID</td></tr><tr><td>code</td><td>string</td><td>授权码</td></tr><tr><td>state</td><td>string</td><td>用于保持请求和回调的状态，授权请求后原样带回给第三方。该参数可用于防止 csrf 攻击（跨站请求伪造攻击），建议第三方带上该参数，可设置为简单的随机数加 session 进行校验。在state传递的过程中会将该参数作为url的一部分进行处理，因此建议对该参数进行url encode操作，防止其中含有影响url解析的特殊字符（如&#39;#&#39;、&#39;&amp;&#39;等）导致该参数无法正确回传。</td></tr></tbody></table><ul><li>示例说明：</li></ul><div class="language-Plain line-numbers-mode" data-ext="Plain"><pre class="language-Plain"><code>{
    &quot;code&quot;:200,
    &quot;msg&quot;:&quot;成功&quot;,
    &quot;data&quot;:{
        &quot;grant_type&quot;: &quot;authorization_code&quot;,
        &quot;client_id&quot;: &quot;cli_a5ca35a685b0x26e&quot;,
        &quot;code&quot;: &quot;a61hb967bd094dge949h79bbexd16dfe&quot;,
        &quot;redirect_uri&quot;: &quot;https://example.com/api/oauth/callback&quot;,
        &quot;code_verifier&quot;: &quot;TxYmzM4PHLBlqm5NtnCmwxMH8mFlRWl_ipie3O0aVzo&quot;
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="获取access-token" tabindex="-1"><a class="header-anchor" href="#获取access-token" aria-hidden="true">#</a> 获取access_token</h2>`,21)),t("ul",null,[d[17]||(d[17]=t("li",null,[t("p",null,"请求地址："),t("ul",null,[t("li",null,[t("div",{class:"language-Bash line-numbers-mode","data-ext":"Bash"},[t("pre",{class:"language-Bash"},[t("code",null,`https://api-v3.teamhelper.cn/open-apis/authen/v1/oauth/token
`)]),t("div",{class:"line-numbers","aria-hidden":"true"},[t("div",{class:"line-number"})])])])])],-1)),d[18]||(d[18]=t("li",null,[t("p",null,"请求方式：POST")],-1)),t("li",null,[d[16]||(d[16]=t("p",null,"请求参数：",-1)),t("ul",null,[d[14]||(d[14]=e("<li><p>请求头</p><ul><li><table><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>Content-Type</td><td>string</td><td>是</td><td>请求体类型。固定值：application/json; charset=utf-8</td></tr><tr><td>user-client</td><td>int</td><td>是</td><td></td></tr></tbody></table></li></ul></li>",1)),t("li",null,[d[13]||(d[13]=t("p",null,"请求体",-1)),t("ul",null,[t("li",null,[t("table",null,[d[12]||(d[12]=t("thead",null,[t("tr",null,[t("th",null,"名称"),t("th",null,"类型"),t("th",null,"必填"),t("th",null,"描述")])],-1)),t("tbody",null,[d[6]||(d[6]=t("tr",null,[t("td",null,"grant_type"),t("td",null,"string"),t("td",null,"是"),t("td",null,"授权类型。固定值：authorization_code")],-1)),d[7]||(d[7]=t("tr",null,[t("td",null,"client_id"),t("td",null,"string"),t("td",null,"是"),t("td",null,"应用的 App ID，可以在开发者后台中的应用详情页面找到该值。示例值：cli_a5ca35a685b0x26e")],-1)),d[8]||(d[8]=t("tr",null,[t("td",null,"client_secret"),t("td",null,"string"),t("td",null,"是"),t("td",null,"应用的 App Secret，可以在开发者后台中的应用详情页面找到该值。示例值：baBqE5um9LbFGDy3X7LcfxQX1sqpXlwy")],-1)),d[9]||(d[9]=t("tr",null,[t("td",null,"code"),t("td",null,"string"),t("td",null,"是"),t("td",null,"授权码。示例值：a61hb967bd094dge949h79bbexd16dfe")],-1)),d[10]||(d[10]=t("tr",null,[t("td",null,"redirect_uri"),t("td",null,"string"),t("td",null,"否"),t("td",null,"在构造授权页页面链接时所拼接的应用回调地址。网页应用授权场景必填，且需要严格与获取授权码时设置的 redirect_uri 保持一致，眼镜端授权场景无需传递")],-1)),t("tr",null,[d[3]||(d[3]=t("td",null,"code_verifier",-1)),d[4]||(d[4]=t("td",null,"string",-1)),d[5]||(d[5]=t("td",null,"否",-1)),t("td",null,[d[1]||(d[1]=n("在发起授权前，本地生成的随机字符串，用于 PKCE（Proof Key for Code Exchange）流程。使用 PKCE 时，该值为必填项。有关 PKCE 的详细介绍，请参阅 ")),t("a",c,[d[0]||(d[0]=n("RFC 7636 - Proof Key for Code Exchange by OAuth Public Clients")),o(i)]),d[2]||(d[2]=n('。长度限制： 最短 43 字符，最长 128 字符可用字符集： [A-Z] / [a-z] / [0-9] / "-" / "." / "_" / "~"示例值：TxYmzM4PHLBlqm5NtnCmwxMH8mFlRWl_ipie3O0aVzo'))])]),d[11]||(d[11]=t("tr",null,[t("td",null,"scope"),t("td",null,"string"),t("td",null,"否"),t("td",null,"用于缩减 access_token 的权限范围。如果未指定，生成的 access_token 将包含用户授权时的所有权限。请务必注意该列表中不得包含重复项以及未授权项（错误码 20068）。")],-1))])])])])]),d[15]||(d[15]=e(`<li><p>请求体示例</p></li><li><div class="language-JSON line-numbers-mode" data-ext="JSON"><pre class="language-JSON"><code>{
    &quot;grant_type&quot;: &quot;authorization_code&quot;,
    &quot;client_id&quot;: &quot;cli_a5ca35a685b0x26e&quot;,
    &quot;client_secret&quot;: &quot;baBqE5um9LbFGDy3X7LcfxQX1sqpXlwy&quot;,
    &quot;code&quot;: &quot;a61hb967bd094dge949h79bbexd16dfe&quot;,
    &quot;redirect_uri&quot;: &quot;https://example.com/api/oauth/callback&quot;,
    &quot;code_verifier&quot;: &quot;TxYmzM4PHLBlqm5NtnCmwxMH8mFlRWl_ipie3O0aVzo&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2))])]),d[19]||(d[19]=t("li",null,[t("p",null,"响应"),t("ul",null,[t("li",null,"响应体类型：application/json; charset=utf-8"),t("li",null,"响应体")])],-1))]),d[21]||(d[21]=e(`<table><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>code</td><td>string</td><td>错误码，为 200 时表明请求成功，非 0 表示失败，请参照下文错误码</td></tr><tr><td>msg</td><td>string</td><td>具体的错误信息，仅在请求失败时返回</td></tr><tr><td>data</td><td>对象</td><td>返回数据</td></tr><tr><td>access_token</td><td>string</td><td>即 access_token，仅在请求成功时返回</td></tr><tr><td>expires_in</td><td>int</td><td>即 access_token 的有效期，单位为秒，仅在请求成功时返回建议使用该字段以确定 access_token 的过期时间，不要硬编码有效期</td></tr><tr><td>refresh_token</td><td>string</td><td>用于刷新 access_token，详见刷新 access_token。该字段仅在请求成功且用户授予 offline_access 权限时返回。如果你在获取 access_token 时设置了 scope 请求参数，且需要返回 refresh_token，则需要在 scope 参数中包括 offline_access。另外，refresh_token 仅能被使用一次。</td></tr><tr><td>refresh_token_expires_in</td><td>int</td><td>即 refresh_token 的有效期，单位为秒，仅在返回 refresh_token 时返回</td></tr><tr><td>token_type</td><td>string</td><td>值固定为 Bearer，仅在请求成功时返回</td></tr><tr><td>scope</td><td>string</td><td>本次请求所获得的 access_token 所具备的权限列表，以空格分隔，仅在请求成功时返回</td></tr></tbody></table><ul><li>响应体示例</li></ul><p>成功响应示例：</p><div class="language-JSON line-numbers-mode" data-ext="JSON"><pre class="language-JSON"><code>{
    &quot;code&quot;: 200,
    &quot;access_token&quot;: &quot;eyJhbGciOiJFUzI1NiIs**********X6wrZHYKDxJkWwhdkrYg&quot;,
    &quot;expires_in&quot;: 7200, // 非固定值，请务必根据响应体中返回的实际值来确定 access_token 的有效期
    &quot;refresh_token&quot;: &quot;eyJhbGciOiJFUzI1NiIs**********XXOYOZz1mfgIYHwM8ZJA&quot;,
    &quot;refresh_token_expires_in&quot;: 604800, // 非固定值，请务必根据响应体中返回的实际值来确定 refresh_token 的有效期
    &quot;scope&quot;: &quot;auth:user.id:read offline_access task:task:read user_profile&quot;,
    &quot;token_type&quot;: &quot;Bearer&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>失败响应示例：</p><div class="language-JSON line-numbers-mode" data-ext="JSON"><pre class="language-JSON"><code>{
    &quot;code&quot;: 20050,
    &quot;error&quot;: &quot;server_error&quot;,
    &quot;error_description&quot;: &quot;An unexpected server error occurred. Please retry your request.&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="获取用户身份信息" tabindex="-1"><a class="header-anchor" href="#获取用户身份信息" aria-hidden="true">#</a> 获取用户身份信息</h2><ul><li>请求地址：</li></ul><div class="language-Plain line-numbers-mode" data-ext="Plain"><pre class="language-Plain"><code>https://api-v3.teamhelper.cn/open-apis/authen/v1/user_info
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><p>请求方式：GET</p></li><li><p>请求参数：</p><ul><li><p>请求头</p></li><li><table><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>Authorization</td><td>string</td><td>是</td><td>access_token以登录用户身份调用 API，可读写的数据范围由用户可读写的数据范围决定。值格式：&quot;Bearer access_token&quot;示例值：&quot;Bearer u-cjz1eKCEx289x1TXEiQJqAh5171B4gDHPq00l0GE1234&quot;</td></tr><tr><td>Content-Type</td><td>string</td><td>是</td><td>固定值：&quot;application/json; charset=utf-8&quot;</td></tr></tbody></table></li><li><p>请求示例</p></li></ul></li></ul><div class="language-Shell line-numbers-mode" data-ext="Shell"><pre class="language-Shell"><code>curl -i -X GET &#39;https://api-v3.teamhelper.cn/open-apis/authen/v1/user_info&#39; \\
-H &#39;Authorization: Bearer t-7f1b******8e560&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>响应参数：</li></ul><table><thead><tr><th>名称收起子列表</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>code</td><td>int</td><td>错误码，非 200 表示失败</td></tr><tr><td>msg</td><td>string</td><td>错误描述</td></tr><tr><td>data</td><td>user_info</td><td>-</td></tr><tr><td>name</td><td>string</td><td>用户姓名</td></tr><tr><td>alias</td><td>string</td><td>员工别名</td></tr><tr><td>avatarUrl</td><td>string</td><td>用户头像</td></tr><tr><td>openId</td><td>string</td><td>用户在应用内的唯一标识</td></tr><tr><td>unionId</td><td>string</td><td>用户在企业内的唯一标识</td></tr><tr><td>email</td><td>string</td><td>用户邮箱</td></tr><tr><td>mobile</td><td>string</td><td>用户手机号</td></tr><tr><td>companyNo</td><td>string</td><td>当前企业标识</td></tr><tr><td>employeeNo</td><td>string</td><td>用户工号</td></tr></tbody></table><ul><li>示例说明</li></ul><div class="language-JSON line-numbers-mode" data-ext="JSON"><pre class="language-JSON"><code>{
    &quot;code&quot;: 200,
    &quot;msg&quot;: &quot;success&quot;,
    &quot;data&quot;: {
        &quot;name&quot;: &quot;zhangsan&quot;,
        &quot;alias&quot;: &quot;zhangsan&quot;,
        &quot;openId&quot;: &quot;ou-caecc734c2e3328a62489fe0648c4b98779515d3&quot;,
        &quot;unionId&quot;: &quot;on-caecc734c2e3328a62489fe06xxx79515d3xxxx&quot;,
        &quot;email&quot;: &quot;zhangsan@feishu.cn&quot;,
        &quot;mobile&quot;: &quot;+86130002883xx&quot;,
        &quot;company_no&quot;: &quot;EU0001&quot;,
        &quot;employee_no&quot;: &quot;1212&quot;
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="刷新access-token" tabindex="-1"><a class="header-anchor" href="#刷新access-token" aria-hidden="true">#</a> 刷新access_token</h2><ul><li><p>请求地址：</p><ul><li><div class="language-Bash line-numbers-mode" data-ext="Bash"><pre class="language-Bash"><code>https://api-v3.teamhelper.cn/open-apis/authen/v1/oauth/token
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul></li><li><p>请求方式：POST</p></li><li><p>请求参数：</p><ul><li><p>请求头</p><ul><li><table><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>Content-Type</td><td>string</td><td>是</td><td>请求体类型。固定值：application/json; charset=utf-8</td></tr></tbody></table></li></ul></li><li><p>请求体</p><ul><li><table><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>grant_type</td><td>string</td><td>是</td><td>授权类型。固定值：refresh_token</td></tr><tr><td>client_id</td><td>string</td><td>是</td><td>应用的 App ID，可以在开发者后台中的应用详情页面找到该值。示例值：cli_a5ca35a685b0x26e</td></tr><tr><td>client_secret</td><td>string</td><td>是</td><td>应用的 App Secret，可以在开发者后台中的应用详情页面找到该值。示例值：baBqE5um9LbFGDy3X7LcfxQX1sqpXlwy</td></tr><tr><td>refresh_token</td><td>string</td><td>是</td><td>刷新令牌，用于刷新 access_token</td></tr><tr><td>scope</td><td>string</td><td>否</td><td>refresh_token</td></tr></tbody></table></li></ul></li><li><p>请求体示例</p></li><li><div class="language-JSON line-numbers-mode" data-ext="JSON"><pre class="language-JSON"><code>{
    &quot;grant_type&quot;: &quot;refresh_token&quot;,
    &quot;client_id&quot;: &quot;cli_a5ca35a685b0x26e&quot;,
    &quot;client_secret&quot;: &quot;baBqE5um9LbFGDy3X7LcfxQX1sqpXlwy&quot;,
    &quot;refresh_token&quot;: &quot;eyJhbGciOiJFUzI1NiIs**********XXOYOZz1mfgIYHwM8ZJA&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>响应</p><ul><li><p>响应体类型：application/json; charset=utf-8</p></li><li><p>响应体</p><ul><li><table><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>code</td><td>string</td><td>错误码，为 200 时表明请求成功，非 0 表示失败，请参照下文错误码</td></tr><tr><td>msg</td><td>string</td><td>具体的错误信息，仅在请求失败时返回</td></tr><tr><td>data</td><td>对象</td><td>返回数据</td></tr></tbody></table></li><li><p>data的数据结构描述</p></li><li><table><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>access_token</td><td>string</td><td>即 access_token，仅在请求成功时返回</td></tr><tr><td>expires_in</td><td>int</td><td>即 access_token 的有效期，单位为秒，仅在请求成功时返回建议使用该字段以确定 access_token 的过期时间，不要硬编码有效期</td></tr><tr><td>refresh_token</td><td>string</td><td>用于刷新 access_token，详见刷新 access_token。该字段仅在请求成功且用户授予 offline_access 权限时返回。如果你在获取 access_token 时设置了 scope 请求参数，且需要返回 refresh_token，则需要在 scope 参数中包括 offline_access。另外，refresh_token 仅能被使用一次。</td></tr><tr><td>refresh_token_expires_in</td><td>int</td><td>即 refresh_token 的有效期，单位为秒，仅在返回 refresh_token 时返回</td></tr><tr><td>token_type</td><td>string</td><td>值固定为 Bearer，仅在请求成功时返回</td></tr><tr><td>scope</td><td>string</td><td>本次请求所获得的 access_token 所具备的权限列表，以空格分隔，仅在请求成功时返回</td></tr></tbody></table></li></ul></li></ul></li><li><p>响应体示例</p></li></ul><p>成功响应示例：</p><div class="language-JSON line-numbers-mode" data-ext="JSON"><pre class="language-JSON"><code>{
    &quot;code&quot;: 200,
    &quot;msg&quot;:&quot;Success&quot;,
    &quot;data&quot;:{
        &quot;access_token&quot;: &quot;eyJhbGciOiJFUzI1NiIs**********X6wrZHYKDxJkWwhdkrYg&quot;,
        &quot;expires_in&quot;: 7200, // 非固定值，请务必根据响应体中返回的实际值来确定 access_token 的有效期
        &quot;refresh_token&quot;: &quot;eyJhbGciOiJFUzI1NiIs**********XXOYOZz1mfgIYHwM8ZJA&quot;,
        &quot;refresh_token_expires_in&quot;: 604800, // 非固定值，请务必根据响应体中返回的实际值来确定 refresh_token 的有效期
        &quot;scope&quot;: &quot;auth:user.id:read offline_access task:task:read user_profile&quot;,
        &quot;token_type&quot;: &quot;Bearer&quot;
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>失败响应示例：</p><div class="language-JSON line-numbers-mode" data-ext="JSON"><pre class="language-JSON"><code>{
    &quot;code&quot;: 10301,
    &quot;msg&quot;: &quot;账号无效&quot;,
    &quot;data&quot;:null
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="通讯录" tabindex="-1"><a class="header-anchor" href="#通讯录" aria-hidden="true">#</a> 通讯录</h1><h2 id="通讯录概述" tabindex="-1"><a class="header-anchor" href="#通讯录概述" aria-hidden="true">#</a> 通讯录概述</h2><p>​ 你可以将通讯录理解为企业组织架构，包含了企业部门信息、企业人员信息等。开放平台针对通讯录提供了一系列安全可靠的接口（API），便于你管理通讯录数据。例如使用通讯录 API 可实现的操作有：</p><ul><li>查看企业的组织架构</li><li>为企业创建新的用户</li><li>修改企业中已有用户的基本属性</li><li>维护用户和部门的关联关系</li><li>维护用户和用户分组的关联关系</li></ul><h2 id="用户" tabindex="-1"><a class="header-anchor" href="#用户" aria-hidden="true">#</a> 用户</h2><h3 id="用户资源介绍" tabindex="-1"><a class="header-anchor" href="#用户资源介绍" aria-hidden="true">#</a> 用户资源介绍</h3><p>用户是通讯录中的基础资源，对应企业组织架构中的用户实体。</p><p><strong>基本概念</strong></p><p>在调用通讯录 API 之前，建议你了解以下基本概念。</p><p><strong>用户 ID</strong></p><p>在调用通讯录 API 时，你将会用到用户的多种身份标识，包括 <code>user_id</code>、<code>open_id</code> 和 <code>union_id</code>。</p><ul><li>user_id 是用户在某一租户内的身份标识。</li><li>open_id 是用户在某一应用内的身份标识。</li><li>union_id 是用户在同一应用服务商所开发的多个应用下的身份标识。</li></ul><h3 id="创建用户" tabindex="-1"><a class="header-anchor" href="#创建用户" aria-hidden="true">#</a> 创建用户</h3><p><strong>请求</strong></p><table><thead><tr><th>基本</th><th></th></tr></thead><tbody><tr><td>HTTP URL</td><td>https://api-v3-test.teamhelper.cn/manage/user/add</td></tr><tr><td>HTTP Method</td><td>POST</td></tr></tbody></table><p><strong>请求头</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>Authorization</td><td>string</td><td>是</td><td>access_token以登录用户身份调用 API，可读写的数据范围由用户可读写的数据范围决定。值格式：&quot;Bearer access_token&quot;示例值：&quot;Bearer u-cjz1eKCEx289x1TXEiQJqAh5171B4gDHPq00l0GE1234&quot;</td></tr><tr><td>Content-Type</td><td>string</td><td>是</td><td>固定值：&quot;application/json; charset=utf-8&quot;</td></tr><tr><td>User-Client</td><td>string</td><td>是</td><td>0:服务端,1:苹果端,2:安卓端,3:WEB端,4眼镜端</td></tr></tbody></table><p><strong>请求体</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td>name</td><td>string</td><td>用户名称</td><td>张三</td></tr><tr><td>alias</td><td>string</td><td>用户别名</td><td></td></tr><tr><td>departmentId</td><td>integer</td><td>部门ID</td><td>1001</td></tr><tr><td>mobile</td><td>string</td><td>手机号</td><td>13812345678</td></tr></tbody></table><p><strong>请求示例</strong></p><div class="language-JSON line-numbers-mode" data-ext="JSON"><pre class="language-JSON"><code>{
  &quot;name&quot;: &quot;张三&quot;,
  &quot;alias&quot;: &quot;麦冬&quot;,
  &quot;departmentId&quot;: 1000001,
  &quot;mobile&quot;:&quot;13812345678&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>响应体</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td>code</td><td>int</td><td>错误码</td><td>200</td></tr><tr><td>msg</td><td>string</td><td>错误描述</td><td>成功</td></tr><tr><td>data</td><td>object</td><td>数据</td><td></td></tr></tbody></table><p><strong>响应体示例</strong></p><div class="language-JSON line-numbers-mode" data-ext="JSON"><pre class="language-JSON"><code>{
  &quot;code&quot;: 200,
  &quot;msg&quot;: &quot;成功&quot;,
  &quot;data&quot;:null
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="修改用户部分信息" tabindex="-1"><a class="header-anchor" href="#修改用户部分信息" aria-hidden="true">#</a> 修改用户部分信息</h3><p><strong>请求</strong></p><table><thead><tr><th>基本</th><th></th></tr></thead><tbody><tr><td>HTTP URL</td><td>https://api-v3-test.teamhelper.cn/manage/user/edit</td></tr><tr><td>HTTP Method</td><td>POST</td></tr></tbody></table><p><strong>请求头</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>Authorization</td><td>string</td><td>是</td><td>access_token以登录用户身份调用 API，可读写的数据范围由用户可读写的数据范围决定。值格式：&quot;Bearer access_token&quot;示例值：&quot;Bearer u-cjz1eKCEx289x1TXEiQJqAh5171B4gDHPq00l0GE1234&quot;</td></tr><tr><td>Content-Type</td><td>string</td><td>是</td><td>固定值：&quot;application/json; charset=utf-8&quot;</td></tr><tr><td>User-Client</td><td>string</td><td>是</td><td>0:服务端,1:苹果端,2:安卓端,3:WEB端,4眼镜端</td></tr></tbody></table><p><strong>请求体</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td>userId</td><td>Long</td><td>用户ID</td><td></td></tr><tr><td>name</td><td>string</td><td>用户名称</td><td>张三</td></tr><tr><td>alias</td><td>string</td><td>用户别名</td><td></td></tr><tr><td>departmentId</td><td>integer</td><td>部门ID</td><td>1001</td></tr><tr><td>mobile</td><td>string</td><td>手机号</td><td>13812345678</td></tr></tbody></table><p><strong>请求示例</strong></p><div class="language-JSON line-numbers-mode" data-ext="JSON"><pre class="language-JSON"><code>{
  &quot;userId&quot;: 10002,
  &quot;name&quot;: &quot;张三&quot;,
  &quot;alias&quot;: &quot;麦冬&quot;,
  &quot;departmentId&quot;: 1000001,
  &quot;mobile&quot;:&quot;13812345678&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>响应体</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td>code</td><td>int</td><td>错误码</td><td>200</td></tr><tr><td>msg</td><td>string</td><td>错误描述</td><td>成功</td></tr><tr><td>data</td><td>object</td><td>数据</td><td></td></tr></tbody></table><p><strong>响应体示例</strong></p><div class="language-JSON line-numbers-mode" data-ext="JSON"><pre class="language-JSON"><code>{
  &quot;code&quot;: 200,
  &quot;msg&quot;: &quot;成功&quot;,
  &quot;data&quot;:null
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="获取单个用户信息" tabindex="-1"><a class="header-anchor" href="#获取单个用户信息" aria-hidden="true">#</a> 获取单个用户信息</h3><p><strong>请求</strong></p><table><thead><tr><th>基本</th><th></th></tr></thead><tbody><tr><td>HTTP URL</td><td>https://api-v3-test.teamhelper.cn/manage/user/info/:userId</td></tr><tr><td>HTTP Method</td><td>GET</td></tr></tbody></table><p><strong>请求头</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>Authorization</td><td>string</td><td>是</td><td>access_token以登录用户身份调用 API，可读写的数据范围由用户可读写的数据范围决定。值格式：&quot;Bearer access_token&quot;示例值：&quot;Bearer u-cjz1eKCEx289x1TXEiQJqAh5171B4gDHPq00l0GE1234&quot;</td></tr><tr><td>Content-Type</td><td>string</td><td>是</td><td>固定值：&quot;application/json; charset=utf-8&quot;</td></tr><tr><td>User-Client</td><td>string</td><td>是</td><td>0:服务端,1:苹果端,2:安卓端,3:WEB端,4眼镜端</td></tr></tbody></table><p><strong>路径参数</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td>userId</td><td>Long</td><td>用户ID</td><td>100001</td></tr></tbody></table><p><strong>请求示例</strong></p><div class="language-JSON line-numbers-mode" data-ext="JSON"><pre class="language-JSON"><code>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>响应</strong></p><p><strong>响应体</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td>code</td><td>int</td><td>错误码</td><td>200</td></tr><tr><td>msg</td><td>string</td><td>错误描述</td><td>成功</td></tr><tr><td>data</td><td>object</td><td>数据</td><td></td></tr><tr><td>name</td><td>string</td><td>用户姓名</td><td></td></tr><tr><td>alias</td><td>string</td><td>员工别名</td><td></td></tr><tr><td>avatarUrl</td><td>string</td><td>用户头像</td><td></td></tr><tr><td>openId</td><td>string</td><td>用户在应用内的唯一标识</td><td></td></tr><tr><td>unionId</td><td>string</td><td>用户在企业内的唯一标识</td><td></td></tr><tr><td>email</td><td>string</td><td>用户邮箱</td><td></td></tr><tr><td>mobile</td><td>string</td><td>用户手机号</td><td></td></tr></tbody></table><p><strong>响应体示例</strong></p><div class="language-JSON line-numbers-mode" data-ext="JSON"><pre class="language-JSON"><code>{
  &quot;code&quot;: 200,
  &quot;msg&quot;: &quot;成功&quot;,
  &quot;data&quot;:{
        &quot;name&quot;: &quot;zhangsan&quot;,
        &quot;alias&quot;: &quot;zhangsan&quot;,
        &quot;openId&quot;: &quot;ou-caecc734c2e3328a62489fe0648c4b98779515d3&quot;,
        &quot;unionId&quot;: &quot;on-caecc734c2e3328a62489fe06xxx79515d3xxxx&quot;,
        &quot;email&quot;: &quot;zhangsan@feishu.cn&quot;,
        &quot;mobile&quot;: &quot;+86130002883xx&quot;,
        &quot;company_no&quot;: &quot;EU0001&quot;,
        &quot;employee_no&quot;: &quot;1212&quot;
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="批量获取用户信息" tabindex="-1"><a class="header-anchor" href="#批量获取用户信息" aria-hidden="true">#</a> 批量获取用户信息</h3><p><strong>请求</strong></p><table><thead><tr><th>基本</th><th></th></tr></thead><tbody><tr><td>HTTP URL</td><td>https://api-v3-test.teamhelper.cn/manage/user/batch</td></tr><tr><td>HTTP Method</td><td>GET</td></tr></tbody></table><p><strong>请求头</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>Authorization</td><td>string</td><td>是</td><td>access_token以登录用户身份调用 API，可读写的数据范围由用户可读写的数据范围决定。值格式：&quot;Bearer access_token&quot;示例值：&quot;Bearer u-cjz1eKCEx289x1TXEiQJqAh5171B4gDHPq00l0GE1234&quot;</td></tr><tr><td>Content-Type</td><td>string</td><td>是</td><td>固定值：&quot;application/json; charset=utf-8&quot;</td></tr><tr><td>User-Client</td><td>string</td><td>是</td><td>0:服务端,1:苹果端,2:安卓端,3:WEB端,4眼镜端</td></tr></tbody></table><p><strong>查询参数</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td>userIds</td><td>Long[]</td><td>用户ID</td><td>[100001]</td></tr></tbody></table><p><strong>请求示例</strong></p><div class="language-JSON line-numbers-mode" data-ext="JSON"><pre class="language-JSON"><code>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>响应体</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td>code</td><td>int</td><td>错误码</td><td>200</td></tr><tr><td>msg</td><td>string</td><td>错误描述</td><td>成功</td></tr><tr><td>data</td><td>list</td><td>数据</td><td></td></tr><tr><td>name</td><td>string</td><td>用户姓名</td><td></td></tr><tr><td>alias</td><td>string</td><td>员工别名</td><td></td></tr><tr><td>avatarUrl</td><td>string</td><td>用户头像</td><td></td></tr><tr><td>openId</td><td>string</td><td>用户在应用内的唯一标识</td><td></td></tr><tr><td>unionId</td><td>string</td><td>用户在企业内的唯一标识</td><td></td></tr><tr><td>email</td><td>string</td><td>用户邮箱</td><td></td></tr><tr><td>mobile</td><td>string</td><td>用户手机号</td><td></td></tr></tbody></table><p><strong>响应体示例</strong></p><div class="language-JSON line-numbers-mode" data-ext="JSON"><pre class="language-JSON"><code>{
  &quot;code&quot;: 200,
  &quot;msg&quot;: &quot;成功&quot;,
  &quot;data&quot;:[{
        &quot;name&quot;: &quot;zhangsan&quot;,
        &quot;alias&quot;: &quot;zhangsan&quot;,
        &quot;openId&quot;: &quot;ou-caecc734c2e3328a62489fe0648c4b98779515d3&quot;,
        &quot;unionId&quot;: &quot;on-caecc734c2e3328a62489fe06xxx79515d3xxxx&quot;,
        &quot;email&quot;: &quot;zhangsan@feishu.cn&quot;,
        &quot;mobile&quot;: &quot;+86130002883xx&quot;,
        &quot;company_no&quot;: &quot;EU0001&quot;,
        &quot;employee_no&quot;: &quot;1212&quot;
    }]
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="用户离职" tabindex="-1"><a class="header-anchor" href="#用户离职" aria-hidden="true">#</a> 用户离职</h3><p><strong>请求</strong></p><table><thead><tr><th>基本</th><th></th></tr></thead><tbody><tr><td>HTTP URL</td><td>https://api-v3-test.teamhelper.cn/manage/user/leaveOffice</td></tr><tr><td>HTTP Method</td><td>POST</td></tr></tbody></table><p><strong>请求头</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>Authorization</td><td>string</td><td>是</td><td>access_token以登录用户身份调用 API，可读写的数据范围由用户可读写的数据范围决定。值格式：&quot;Bearer access_token&quot;示例值：&quot;Bearer u-cjz1eKCEx289x1TXEiQJqAh5171B4gDHPq00l0GE1234&quot;</td></tr><tr><td>Content-Type</td><td>string</td><td>是</td><td>固定值：&quot;application/json; charset=utf-8&quot;</td></tr><tr><td>User-Client</td><td>string</td><td>是</td><td>0:服务端,1:苹果端,2:安卓端,3:WEB端,4眼镜端</td></tr></tbody></table><p><strong>请求体</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td>userId</td><td>Long</td><td>用户ID</td><td>100001</td></tr><tr><td>type</td><td>string</td><td>资源转移类型0:不转移1转移给其他用户</td><td>0</td></tr><tr><td>assets</td><td>[]</td><td>type=1时，该集合不能为空</td><td></td></tr><tr><td>appId</td><td>string</td><td>应用ID</td><td></td></tr><tr><td>userId</td><td>long</td><td>用户ID</td><td></td></tr></tbody></table><p><strong>请求示例</strong></p><div class="language-JSON line-numbers-mode" data-ext="JSON"><pre class="language-JSON"><code>{
  &quot;userId&quot;: 10001,
  &quot;type&quot;: &quot;1&quot;,
  &quot;assets&quot;: [
    {
      &quot;userId&quot;: 10002,
      &quot;appId&quot;: &quot;xxxxxxxxxxxxxxxxxxxx&quot;
    }
  ]
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>响应体</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td>code</td><td>int</td><td>错误码</td><td>200</td></tr><tr><td>msg</td><td>string</td><td>错误描述</td><td>成功</td></tr><tr><td>data</td><td>object</td><td>数据</td><td></td></tr></tbody></table><p><strong>响应体示例</strong></p><div class="language-JSON line-numbers-mode" data-ext="JSON"><pre class="language-JSON"><code>{
  &quot;code&quot;: 200,
  &quot;msg&quot;: &quot;成功&quot;,
  &quot;data&quot;:null
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,99))])}const q=r(u,[["render",h],["__file","api-list.html.vue"]]);export{q as default};
